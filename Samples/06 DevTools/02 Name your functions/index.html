<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="MyApp">
<head>
    <title></title>
</head>
<body>
    <div ng-controller="HomeCtrl">
        <button ng-click="run()">Run</button>
    </div>

    <script src="angular.js"></script>
    <script>
        angular.module("MyApp", []).controller("HomeCtrl", function ($scope) {

            for (var i = 0; i < 10; i++) {
                (function (i) {
                    getRunTask()(function () {
                        console.log(i);
                    });
                })(i);
            }

            function getRunTask() {
                return function runTask(callback) {
                    setTimeout(function () {
                        callback();
                    }, 1000);
                }
            }

            //for (var i = 0; i < 10; i++) {
            //    (function functionAsAScope(i) {
            //        getRunTask()(function taskCompleted() {
            //            console.log(i);
            //        });
            //    })(i);
            //}

            //function getRunTask() {
            //    return function runTask(callback) {
            //        setTimeout(function timeout() {
            //            callback();
            //        }, 1000);
            //    }
            //}
        });
    </script>
</body>
</html>
